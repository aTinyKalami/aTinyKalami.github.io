<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	
	<!-- title -->
	
	<title>
	
		动手实操 - 在本地使用Dify构建Agent | 
	 
	十二亚晖的个人空间
	</title>
	
	<!-- keywords,description -->
	
		<meta name="keywords" content="给时光以生命" />
	
	
		<meta name="description" content="在本地安装Dify，搭建Agent应用" />
	

	<!-- favicon -->
	
	<link rel="shortcut icon" href="/favicon.ico">
	


	<!-- search -->
	<script>
		var searchEngine = "https://www.google.com/search?q=";
		if(typeof searchEngine == "undefined" || searchEngine == null || searchEngine == ""){
			searchEngine = "https://www.google.com/search?q=";
		}
		var homeHost = "atinykalami.github.io";
		if(typeof homeHost == "undefined" || homeHost == null || homeHost == ""){
			homeHost = window.location.host;
		}
	</script>


	
<link rel="stylesheet" href="/css/main.css">

	
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">

	
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/darcula.min.css">

	
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">


	
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.0/dist/jquery.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>

	
<script src="/js/main.js"></script>


	
		
<script src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>

		
<script src="https://cdn.jsdelivr.net/npm/valine@v1.5.1/dist/Valine.min.js"></script>

	
	

<meta name="generator" content="Hexo 8.0.0"></head>

<body>
	<header id="header">
    <a id="title" href="/" class="logo">十二亚晖的个人空间</a>

	<ul id="menu">
    

    
      <li class="menu-item">
        <a href="/tags" class="menu-item-link">标签</a>
      </li>
    

    
      <li class="menu-item">
        <a href="/categories" class="menu-item-link">分类</a>
      </li>
    

    
      
      
        <li class="menu-item">
          <a href='https://github.com/aTinyKalami' class="menu-item-link" target="_blank">
            我的项目
          </a>
        </li>
      
        <li class="menu-item">
          <a href='https://github.com/aTinyKalami/blog-code-folder' class="menu-item-link" target="_blank">
            博客源码
          </a>
        </li>
      
    
  
    
      <li class="menu-item">
        <a href='https://github.com/aTinyKalami' class="menu-item-link" target="_blank">
          <i class="fa fa-github fa-2x"></i>
        </a>
      </li>
    
	</ul>
</header>

	
<div id="sidebar">
	<button id="sidebar-toggle" class="toggle" ><i class="fa fa-arrow-right " aria-hidden="true"></i></button>
	
	<div id="site-toc">
		<input id="search-input" class="search-input" type="search" placeholder="按回车全站搜索">
		<div id="tree">
			

			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										01 通用文档
									</a>
									
							<ul>
								<li class="file">
									<a href="/2025/10/05/01%20%E9%80%9A%E7%94%A8%E6%96%87%E6%A1%A3/2025-10-01-Markdown%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%85%A5%E6%8C%87%E5%AF%BC/">
                     
										    01 Markdown格式文档输入规则
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/25/01%20%E9%80%9A%E7%94%A8%E6%96%87%E6%A1%A3/2025-10-02-HEXO%E6%A1%86%E6%9E%B6%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E6%94%BB%E7%95%A5/">
                     
										    02 Github上部署Hexo框架的博客的亲测爬坑攻略
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/25/01%20%E9%80%9A%E7%94%A8%E6%96%87%E6%A1%A3/2025-10-03-HEXO%E6%A1%86%E6%9E%B6%E5%8D%9A%E5%AE%A2%E6%89%8B%E5%8A%A8%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/">
                     
										    03 Hexo框架的Github文章手工部署常用命令
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/01%20%E9%80%9A%E7%94%A8%E6%96%87%E6%A1%A3/2025-10-04-ipynb%E6%A0%BC%E5%BC%8F%E6%96%87%E6%A1%A3%E4%BD%BF%E7%94%A8%E6%8C%87%E5%AF%BC/">
                     
										    04 ipynb格式使用指导
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										03 AI学习
									</a>
									
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										00 AI知识地图
									</a>
									
							<ul>
								<li class="file">
									<a href="/2025/05/05/03%20AI%E5%AD%A6%E4%B9%A0/00%20AI%E7%9F%A5%E8%AF%86%E5%9C%B0%E5%9B%BE/2025-10-05-%E3%80%90AI%E5%AD%A6%E4%B9%A0%E3%80%91AI%E7%9F%A5%E8%AF%86%E5%9C%B0%E5%9B%BE/">
                     
										    AI知识地图
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										02 AI硬件体系
									</a>
									
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/02%20AI%E7%A1%AC%E4%BB%B6%E4%BD%93%E7%B3%BB/2025-10-05-%E3%80%90AI%E5%AD%A6%E4%B9%A0%E3%80%91AI%E8%8A%AF%E7%89%87/">
                     
										    AI芯片
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/02%20AI%E7%A1%AC%E4%BB%B6%E4%BD%93%E7%B3%BB/2025-10-06-%E3%80%90AI%E5%AD%A6%E4%B9%A0%E3%80%91AI%E5%AD%98%E5%82%A8/">
                     
										    02 AI存储
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										04 AI模型与应用
									</a>
									
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-01-01-%E3%80%90%E6%A8%A1%E5%9E%8B%E6%9E%B6%E6%9E%84%E3%80%91%E6%90%9E%E6%87%82%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84/">
                     
										    模型基础 - 搞懂大模型文件结构
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-01-02-%E3%80%90%E6%A8%A1%E5%9E%8B%E6%9E%B6%E6%9E%84%E3%80%91Transfomer%E6%A8%A1%E5%9E%8B%E6%9E%B6%E6%9E%84/">
                     
										    Transformer模型架构基础
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-01-03-%E3%80%90%E6%A8%A1%E5%9E%8B%E6%9E%B6%E6%9E%84%E3%80%91%E5%A4%9A%E6%A8%A1%E6%80%81%E5%A4%A7%E6%A8%A1%E5%9E%8B/">
                     
										    多模态模型
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-02-01-%E3%80%90%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E3%80%91Tokenizer%E5%88%86%E8%AF%8D/">
                     
										    基础知识 - Tokeniazer分词
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-02-02-%E3%80%90%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E3%80%91Embedding%E8%AF%8D%E5%B5%8C%E5%85%A5/">
                     
										    基础知识 - Embedding (词嵌入/向量化)
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-03-01-%E3%80%90%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E3%80%91%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%AE%AD%E6%8E%A8%E6%B5%81%E7%A8%8B%E4%B8%8E%E6%A1%86%E6%9E%B6/">
                     
										    训推框架 - 大模型训练和推理流程与框架
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-03-02-%E3%80%90%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E3%80%91%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E8%B6%85%E5%8F%82%E8%AE%BE%E7%BD%AE%E4%B8%8E%E6%96%B9%E6%B3%95/">
                     
										    模型训练 - 大模型训练超参设置与方法
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/02/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-04-01-%E3%80%90%E6%A8%A1%E5%9E%8B%E5%90%8E%E8%AE%AD%E7%BB%83%E3%80%91%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%90%8E%E8%AE%AD%E7%BB%83%E4%B8%8E%E5%BE%AE%E8%B0%83/">
                     
										    后训练 - 大模型后训练与微调
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-04-02-%E3%80%90%E6%A8%A1%E5%9E%8B%E5%90%8E%E8%AE%AD%E7%BB%83%E3%80%91%E5%A6%82%E4%BD%95%E8%AE%A9%E5%9F%BA%E7%A1%80%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%A1%8C%E4%B8%9A%E5%8C%96/">
                     
										    模型训练 - 基础大模型如何行业化训练
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-10-02-%E3%80%90AI%E6%A8%A1%E5%9E%8B%E3%80%91%E5%A4%A7%E6%A8%A1%E5%9E%8BAPI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E5%8F%82%E6%95%B0/">
                     
										    基础知识 - 大模型API接口调用参数说明
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/11/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-10-03-%E3%80%90AI%E6%A1%86%E6%9E%B6%E3%80%91RAY%E5%92%8CK8S%E5%AE%B9%E5%99%A8%E6%A1%86%E6%9E%B6%E7%9A%84%E5%85%B3%E7%B3%BB%E5%92%8C%E5%8C%BA%E5%88%AB/">
                     
										    AI框架 - 使用K8S容器框架和RAY的关系和区别
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-10-04-%E3%80%90AI%E5%BA%94%E7%94%A8%E3%80%91GraphRAG%E6%96%B9%E6%A1%88/">
                     
										    AI应用 - Graph RAG
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/04%20AI%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%BA%94%E7%94%A8/2025-10-04-%E3%80%90AI%E5%BA%94%E7%94%A8%E3%80%91RAG%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90/">
                     
										    AI应用 - RAG方案
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										09 动手实操
									</a>
									
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/09%20%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D/2025-01-01-%E3%80%90%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E3%80%91Huggingface%E7%9A%84%E6%A8%A1%E5%9E%8B%E5%92%8C%E6%95%B0%E6%8D%AE%E9%9B%86%E4%BD%BF%E7%94%A8%E6%8C%87%E5%AF%BC/">
                     
										    Huggingface平台的模型和数据集使用
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/09%20%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D/2025-01-01-%E3%80%90%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E3%80%91%E5%AE%89%E8%A3%85Evalscope%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E6%A1%86%E6%9E%B6/">
                     
										    安装Evalscope模型评估框架
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/09%20%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D/2025-01-02-%E3%80%90%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E3%80%91%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%E4%B8%8E%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/">
                     
										    实操系统环境与工具软件配置
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/09%20%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D/2025-10-01-%E3%80%90%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D%E3%80%91%E5%9C%A8%E7%BA%BF%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%9B%B6%E4%BB%A3%E7%A0%81%E5%BE%AE%E8%B0%83/">
                     
										    动手实操 - 在线大模型零代码微调
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/29/03%20AI%E5%AD%A6%E4%B9%A0/09%20%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D/2025-10-02-%E3%80%90%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D%E3%80%91%E5%9C%A8%E6%9C%AC%E5%9C%B0%E8%BF%9B%E8%A1%8C%E6%A8%A1%E5%9E%8B%E5%BE%AE%E8%B0%83/">
                     
										    在本地进行NLP大模型的微调
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/12/27/03%20AI%E5%AD%A6%E4%B9%A0/09%20%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D/2025-12-27-%E3%80%90%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D%E3%80%91%E5%9C%A8%E6%9C%AC%E5%9C%B0%E8%AE%AD%E7%BB%83%E4%B8%AD%E5%9B%BD%E5%90%8D%E8%91%97NanoGPT/">
                     
										    动手实操 - 在本地训练中国名著NanoGPT
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file active">
									<a href="/2026/01/01/03%20AI%E5%AD%A6%E4%B9%A0/09%20%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D/2026-01-01-%E3%80%90%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D%E3%80%91%E5%9C%A8%E6%9C%AC%E5%9C%B0%E4%BD%BF%E7%94%A8Dify%E6%9E%84%E5%BB%BAAgent/">
                     
										    动手实操 - 在本地使用Dify构建Agent
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/09%20%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D/2026-01-10-%E3%80%90%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D%E3%80%91%E5%9C%A8%E6%9C%AC%E5%9C%B0%E4%BD%BF%E7%94%A8ComfyUI%E7%94%9F%E6%88%90%E5%9B%BE%E7%89%87/">
                     
										    动手实操 - 在本地通过ComfyUI生成图片
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/05/05/03%20AI%E5%AD%A6%E4%B9%A0/2025-01-01-%E3%80%90%E4%B8%B4%E6%97%B6%E8%AE%B0%E5%BD%95%E3%80%91%E4%BE%9B%E5%90%8E%E7%BB%AD%E7%BB%86%E5%8C%96/">
                     
										    临时课题记录
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/03%20AI%E5%AD%A6%E4%B9%A0/2025-10-01-%E3%80%90AI%E6%B4%9E%E5%AF%9F%E3%80%91%E4%B8%9A%E7%95%8C%E6%B4%9E%E5%AF%9F%E7%BD%91%E5%9D%80/">
                     
										    AI洞察 - 业界趋势洞察材料与网址
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										08 业界厂商
									</a>
									
							<ul>
								<li class="file">
									<a href="/2025/10/05/08%20%E4%B8%9A%E7%95%8C%E5%8E%82%E5%95%86/2025-10-06-%E3%80%90AI%E5%8E%82%E5%95%86%E3%80%91%E8%8B%B1%E4%BC%9F%E8%BE%BE/">
                     
										    英伟达
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/08%20%E4%B8%9A%E7%95%8C%E5%8E%82%E5%95%86/2025-10-10-%E3%80%90AI%E5%8E%82%E5%95%86%E3%80%91%E9%98%BF%E9%87%8C%E4%BA%91/">
                     
										    阿里云
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										DeepSeek
									</a>
									
							<ul>
								<li class="file">
									<a href="/2025/10/05/08%20%E4%B8%9A%E7%95%8C%E5%8E%82%E5%95%86/DeepSeek/2025-10-07-%E3%80%90AI%E6%A8%A1%E5%9E%8B%E3%80%91DeepSeek%20V3%E5%92%8CR1/">
                     
										    DeepSeek V3和R1技术创新
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/08%20%E4%B8%9A%E7%95%8C%E5%8E%82%E5%95%86/DeepSeek/2025-10-08-%E3%80%90AI%E6%A8%A1%E5%9E%8B%E3%80%91DeepSeek%20V3.2%E5%92%8CDSA/">
                     
										    DeepSeek V3.2及核心技术DSA细粒度稀疏注意力机制
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/11/02/08%20%E4%B8%9A%E7%95%8C%E5%8E%82%E5%95%86/DeepSeek/2025-10-09-%E3%80%90AI%E6%A8%A1%E5%9E%8B%E3%80%91DeepSeek%20OCR/">
                     
										    DeepSeek OCR模型技术与意义解析
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										09 日常记录
									</a>
									
							<ul>
								<li class="file">
									<a href="/2025/10/05/09%20%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/2025-10-15-%E3%80%90%E4%B8%AA%E4%BA%BA%E8%AE%B0%E5%BD%95%E3%80%91%E6%B5%B7%E5%A4%96%E5%9B%BD%E5%AE%B6%E8%B6%B3%E8%BF%B9/">
                     
										    这些年走过的国家和城市
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/11/05/09%20%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/2025-11-01-%E3%80%90%E4%B8%AA%E4%BA%BA%E8%AE%B0%E5%BD%95%E3%80%91%E5%9C%9F%E8%80%B3%E5%85%B6%E5%8D%A1%E5%B8%95%E5%A4%9A%E5%A5%87%E4%BA%9A/">
                     
										    个人记录 - 土耳其卡帕多奇亚
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2025/10/05/2025-01-01-%E3%80%90%E6%96%87%E6%A1%A3%E5%88%86%E7%B1%BB%E3%80%91%E6%96%87%E6%A1%A3%E5%90%8D%E7%A7%B0%20%E6%A8%A1%E6%9D%BF/">
                     
										    AI洞察 - 业界趋势洞察材料与网址
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
		</div>
	</div>
</div>

	<!-- 引入正文 -->
	<div id="content" class="content">
		<h1 id="article-title">
	动手实操 - 在本地使用Dify构建Agent
</h1>

<!-- meta -->
<div class="article-meta">
	

	<span>十二亚晖</span>
	<span>2026-01-01 09:00:00</span>

  <div id="article-categories">
    
		  <span>Categories：</span>
      
          
              <span>
                  <i class="fa fa-folder" aria-hidden="true">
                  <a href="/categories/AI，Agent/">AI，Agent</a>
                  </i>
                
              </span>
          
      
    

    
		    <span>Tags：</span>
        
            
                <span>
                    <i class="fa fa-tag" aria-hidden="true">
                    <a href="/tags/AI/">AI</a>
                    </i>
                </span>
            
        
            
                <span>
                    <i class="fa fa-tag" aria-hidden="true">
                    <a href="/tags/实操/">实操</a>
                    </i>
                </span>
            
        
            
                <span>
                    <i class="fa fa-tag" aria-hidden="true">
                    <a href="/tags/Agent/">Agent</a>
                    </i>
                </span>
            
        
    
  </div>

</div>

<!-- content -->
<div id="article-content">
	<h1 id="一-环境准备-软件（Linux、Docker和Dify）安装"><a href="#一-环境准备-软件（Linux、Docker和Dify）安装" class="headerlink" title="一. 环境准备 - 软件（Linux、Docker和Dify）安装"></a>一. 环境准备 - 软件（Linux、Docker和Dify）安装</h1><h2 id="1-安装说明"><a href="#1-安装说明" class="headerlink" title="1. 安装说明"></a>1. 安装说明</h2><p>网上的各种教程指导Dify的本地安装一般有3中方式，个人推荐使用Docker Compse方式，因为这种方式是目前业界处理复杂 AI 应用的标准做法。掌握了这一套流程，以后在学习部署其他类似工具，如LangChain、LangGraph时，逻辑是完全相通的。</p>
<p>三种方式的详细的对比如下：</p>
<p><strong>Dify 部署方式对比</strong></p>
<table>
<thead>
<tr>
<th align="left">维度</th>
<th align="left"><strong>方式 A：克隆源码 (Docker Compose)</strong></th>
<th align="left"><strong>方式 B：单镜像运行 (Docker Run)</strong></th>
<th align="left"><strong>方式 C：第三方一键安装包</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>部署原理</strong></td>
<td align="left">下载官方配置表，由 Docker 自动编排 10+ 个独立组件镜像。</td>
<td align="left">将所有功能模块塞进一个巨大的单一镜像中（All-in-one）。</td>
<td align="left">经过二次封装的 <code>.exe</code> 安装程序或第三方脚本。</td>
</tr>
<tr>
<td align="left"><strong>稳定性</strong></td>
<td align="left"><strong>最高</strong>。官方主推架构，数据库、Redis 等组件隔离运行，互不干扰。</td>
<td align="left"><strong>中等</strong>。组件耦合严重，在高负载或持久化存储时容易报错。</td>
<td align="left"><strong>最低</strong>。更新严重滞后，且容易报出非官方的奇葩环境错误。</td>
</tr>
<tr>
<td align="left"><strong>安装难度</strong></td>
<td align="left"><strong>极低</strong>。仅需 3 条标准命令，环境要求最纯粹。</td>
<td align="left"><strong>极低</strong>。通常只需要 1 条超长命令即可启动。</td>
<td align="left">看似简单，但出问题时由于是黑盒，极难排查。</td>
</tr>
<tr>
<td align="left"><strong>学习价值</strong></td>
<td align="left"><strong>完美</strong>。可深度配置 <code>.env</code> 环境变量，方便接入各种 LLM 和修改网络代理。</td>
<td align="left"><strong>较差</strong>。修改配置极度不便，难以观察各组件间的协作逻辑。</td>
<td align="left"><strong>差</strong>。完全隐藏了系统结构，不建议想要深入学习 Agent 的用户使用。</td>
</tr>
<tr>
<td align="left"><strong>数据安全</strong></td>
<td align="left"><strong>优秀</strong>。数据卷挂载清晰，备份和迁移本地文件夹即可。</td>
<td align="left"><strong>一般</strong>。数据存储在单一容器内，误删容器风险较高。</td>
<td align="left"><strong>未知</strong>。数据存储路径取决于封装者的设计。</td>
</tr>
</tbody></table>
<h2 id="2-安装步骤"><a href="#2-安装步骤" class="headerlink" title="2.安装步骤"></a>2.安装步骤</h2><h3 id="2-1-在本机安装Ubuntu-Linux环境"><a href="#2-1-在本机安装Ubuntu-Linux环境" class="headerlink" title="2.1 在本机安装Ubuntu Linux环境"></a>2.1 在本机安装Ubuntu Linux环境</h3><p>在本机的Windows环境中通过WSL（Window Subsystem for Linux）环境安装Linux。这种方式据说依赖比较复杂，新手不太友好。但我前期在做模型LoRA微调和模型评测的时候，安装魔搭社区模型评测工具Evalscope，已经折腾配置了很久WSL，基本问题都解决了，先尝试使用这种方法。</p>
<p>前期已经在本机安装Ubuntu，使用前期构建的纯净镜像（ubuntu_evalscope_CLEAN），构建一个新的干净的Ubuntu Linux环境，用于Dify的动手实验。环境命名（ubuntu_dify），环境目录为(D:\HandsOn\Dify)。需要在本机的windows powershell环境中执行命令，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wsl --import ubuntu_dify  <span class="string">&quot;D:\HandsOn\Dify&quot;</span>  <span class="string">&quot;D:\WSL_Backups\ubuntu_evalscope_CLEAN.tar&quot;</span></span><br></pre></td></tr></table></figure>
<p>安装完后，在powershell下使用下面 wsl -d 命令进入新创建的实例，检验创建是否成功:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wsl -d ubuntu_dify</span><br></pre></td></tr></table></figure>
<p>如果成功进入，命令行提示符会变为类似 root@DESKTOP-2GVJQ09:&#x2F;mnt&#x2F;c&#x2F;Users&#x2F;Administrator# 。</p>
<p>说明：也有博主建议在Linux系统中构建Docker环境，要求本机安装Linux OS，或者通过虚拟化（如VMware）构建虚机，即在本地安装VMware Workstation虚拟机环境，然后安装Ubuntu Linux OS，再通过虚拟机管理软件（视频教程博主用的是：宝塔）构建容器镜像，安装Dify。</p>
<p>这种方式的好处是虚拟机管理软件直接集成了Docker安装，并且在应用市场中集成了Dify的开源已发布版本。</p>
<p>这种方式的参考教程：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV11ZBhBtEfR?t=1569.6">→ 点我</a>。</p>
<h3 id="2-2-在Linux环境基础上安装Docker"><a href="#2-2-在Linux环境基础上安装Docker" class="headerlink" title="2.2 在Linux环境基础上安装Docker"></a>2.2 在Linux环境基础上安装Docker</h3><h4 id="2-2-1-安装Docerk的2种方式"><a href="#2-2-1-安装Docerk的2种方式" class="headerlink" title="2.2.1 安装Docerk的2种方式"></a>2.2.1 安装Docerk的2种方式</h4><p>在这里有两种方式，1）可以在Windows中安装Docker_Desktop，通过独立的容器引擎进行环境管理。2）也可以在Linux镜像中单独安装Docker，单独进行管理。</p>
<p>两种方式优劣对比如下：</p>
<p><strong>Docker Desktop vs. Ubuntu 实例原生 Docker 深度对比</strong></p>
<table>
<thead>
<tr>
<th align="left">维度</th>
<th align="left"><strong>方式 A：Docker Desktop (Windows 托管)</strong></th>
<th align="left"><strong>方式 B：Ubuntu 实例内手动安装 (Linux 原生)</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>安装难度</strong></td>
<td align="left"><strong>极低</strong>。图形化安装包，一键式完成。</td>
<td align="left"><strong>中等</strong>。需通过命令行添加仓库、密钥并手动安装依赖。</td>
</tr>
<tr>
<td align="left"><strong>系统要求</strong></td>
<td align="left"><strong>苛刻</strong>。对 Windows 版本号有硬性要求（需支持最新 WSL 接口）。</td>
<td align="left"><strong>宽松</strong>。只要当前的 WSL 2 实例能跑起来，基本都能安装。</td>
</tr>
<tr>
<td align="left"><strong>运行效率</strong></td>
<td align="left"><strong>一般</strong>。由于包含图形化管理界面，后台常驻内存占用较高。</td>
<td align="left"><strong>极高</strong>。原生 Linux 服务进程，无图形开销，资源分配更直接。</td>
</tr>
<tr>
<td align="left"><strong>管理方式</strong></td>
<td align="left"><strong>可视化</strong>。提供 GUI 界面，可通过鼠标查看日志、管理容器和镜像。</td>
<td align="left"><strong>全命令行</strong>。依赖 <code>docker ps</code>、<code>docker logs</code> 等常用指令进行操作。</td>
</tr>
<tr>
<td align="left"><strong>网络特性</strong></td>
<td align="left"><strong>自动映射</strong>。<code>localhost</code> 访问非常稳定，支持与 Windows 代理自动同步。</td>
<td align="left"><strong>手动配置</strong>。在某些网络环境下，需手动处理 WSL 与宿主机的 IP 映射。</td>
</tr>
<tr>
<td align="left"><strong>启动方式</strong></td>
<td align="left">随 Windows 自动启动，并能自动激活后端 WSL 引擎。</td>
<td align="left">需手动执行 <code>sudo service docker start</code> 或自行编写启动脚本。</td>
</tr>
<tr>
<td align="left"><strong>核心差异点 (数据管理)</strong></td>
<td align="left"><strong>解耦管理</strong>。镜像与容器数据由 Docker 引擎统一管理，不受特定 Linux 实例删除的影响。</td>
<td align="left"><strong>强绑定</strong>。镜像和数据完全存储在当前实例虚拟硬盘内，若卸载实例（unregister），数据将永久丢失。</td>
</tr>
</tbody></table>
<h4 id="2-2-2-安装Docker-Desktop"><a href="#2-2-2-安装Docker-Desktop" class="headerlink" title="2.2.2 安装Docker Desktop"></a>2.2.2 安装Docker Desktop</h4><p>我使用在Windows中安装Docker_Desktop的方式。详细操作步骤：</p>
<h5 id="1）第一步：安装-Docker-Desktop（在-Windows-上）"><a href="#1）第一步：安装-Docker-Desktop（在-Windows-上）" class="headerlink" title="1）第一步：安装 Docker Desktop（在 Windows 上）"></a>1）第一步：安装 Docker Desktop（在 Windows 上）</h5><p>访问 <a target="_blank" rel="noopener" href="https://www.docker.com/products/docker-desktop/">Docker 官网</a> ,点击Download Docker Desktop，选择 Download for Windows - AMD64，下载并安装。这个选项其实一样适用于Intel CPU。</p>
<p>安装过程中，确保勾选 “Use the WSL 2 based engine”（默认通常是勾选的）。安装完成后，根据提示重启电脑。</p>
<h5 id="2）第二步：（插曲，视个人电脑实际情况可选）Windows-OS版本升级"><a href="#2）第二步：（插曲，视个人电脑实际情况可选）Windows-OS版本升级" class="headerlink" title="2）第二步：（插曲，视个人电脑实际情况可选）Windows OS版本升级"></a>2）第二步：（插曲，视个人电脑实际情况可选）Windows OS版本升级</h5><p>中间我的电脑的Win10系统因为版本过旧，要求升级到22H2。</p>
<p>按下快捷键 Win + R，输入 winver 并回车。查看弹出的窗口：Windows 10，查看内部版本号（Build）小于 19045，必需升级。否则Docker Desktop不支持。</p>
<p>直接在操作系统的配置与更新中升级，升到96%后停滞一直没反应。改为 <a target="_blank" rel="noopener" href="https://www.microsoft.com/zh-cn/software-download/windows10">下载win10易升</a>,这是个微软发布的单独的升级程序。下载后运行，等待升级完成后重启，即可安装。</p>
<p>运行Docker Desktop安装程序时，务必勾选：“Use the WSL 2 based engine”。安装完成后，按系统要求重启，注册&#x2F;配置Docker账号。</p>
<h5 id="3）第三步：（插曲，视个人电脑实际情况可选）升级WSL版本"><a href="#3）第三步：（插曲，视个人电脑实际情况可选）升级WSL版本" class="headerlink" title="3）第三步：（插曲，视个人电脑实际情况可选）升级WSL版本"></a>3）第三步：（插曲，视个人电脑实际情况可选）升级WSL版本</h5><p>进入Docker Desktop后，系统提示WSL版本过旧，打开 PowerShell（快捷键 Win+X，选择点击“以管理员身份运行”），输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wsl --update</span><br></pre></td></tr></table></figure>
<p>然后重启 WSL 服务（或重启电脑），让 WSL 引擎重新加载。在PowerShell中输入</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wsl --shutdown</span><br></pre></td></tr></table></figure>
<p>然后，重新进入 Docker Desktop，选择Restart。如果转圈很久，可以直接重启一次电脑。</p>
<h5 id="4）第四步：开启-WSL-资源整合（必选，最关键的一步）："><a href="#4）第四步：开启-WSL-资源整合（必选，最关键的一步）：" class="headerlink" title="4）第四步：开启 WSL 资源整合（必选，最关键的一步）："></a>4）第四步：开启 WSL 资源整合（必选，最关键的一步）：</h5><p>再次启动 Docker Desktop，这个时候应该可以正常进入了。找到 Settings (齿轮图标) -&gt; Resources -&gt; WSL integration。会看到前面的 Ubuntu_Dify 实例，手动把它的开关打开。然后点击 Apply&amp;Restart。</p>
<p>（这里如果看不到，可能是WSL的版本设成了1，而不是2。可以按照AI助手指导更改默认版本设置，并对实例版本进行转换。）</p>
<p>Apply&amp;Restart完成后，右下角会变为仅显示Apply。</p>
<h3 id="2-3-在Linux中安装Dify"><a href="#2-3-在Linux中安装Dify" class="headerlink" title="2.3 在Linux中安装Dify"></a>2.3 在Linux中安装Dify</h3><p>接下来就是进入Ubuntu实例，下载安装Dify。</p>
<h5 id="1）第一步：进入-Ubuntu-实例"><a href="#1）第一步：进入-Ubuntu-实例" class="headerlink" title="1）第一步：进入 Ubuntu 实例"></a>1）第一步：进入 Ubuntu 实例</h5><p>通过 Windows Terminal 的下拉菜单选择 ubuntu_dify，或者直接在 PowerShell 里输入下面命令，启动实例：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wsl -d ubuntu_dify</span><br></pre></td></tr></table></figure>
<h4 id="2）第二步：验证-Docker-环境"><a href="#2）第二步：验证-Docker-环境" class="headerlink" title="2）第二步：验证 Docker 环境"></a>2）第二步：验证 Docker 环境</h4><p>在实例的窗口里，输入以下命令确认 Docker 是否真的“透传”进来了：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure>
<p>正常结果： 应该能看到一行标题 CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES，下面是空的。只要没报错，就说明成功了。</p>
<h4 id="3）第三步：下载并启动-Dify-官方推荐流程"><a href="#3）第三步：下载并启动-Dify-官方推荐流程" class="headerlink" title="3）第三步：下载并启动 Dify (官方推荐流程)"></a>3）第三步：下载并启动 Dify (官方推荐流程)</h4><p>依次复制并运行以下命令：</p>
<ol>
<li>克隆代码仓库</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/langgenius/dify.git</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>进入部署目录</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> dify/docker</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>配置环境变量</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> .env.example .<span class="built_in">env</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>一键启动</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure>

<h4 id="4）第四步：访问-Dify"><a href="#4）第四步：访问-Dify" class="headerlink" title="4）第四步：访问 Dify"></a>4）第四步：访问 Dify</h4><p>启动后，需要等待大约 3-5 分钟（因为数据库、向量库等 10 多个组件需要初始化），等窗口中的各项Pulling的进度都完成（显示Pulled），并且回到命令提示符后，就可以通过浏览器访问Dify了。</p>
<p>访问地址： 在 Windows 的浏览器地址栏直接输入 <a target="_blank" rel="noopener" href="http://localhost./">http://localhost。</a></p>
<p>首次设置： 现在会看到设置管理员账户的页面。设置好邮箱和密码后，就可以开始搭建第一个 Agent 了。</p>
<h2 id="2-4-后续日常使用与关闭"><a href="#2-4-后续日常使用与关闭" class="headerlink" title="2.4 后续日常使用与关闭"></a>2.4 后续日常使用与关闭</h2><h3 id="2-4-1-日常使用"><a href="#2-4-1-日常使用" class="headerlink" title="2.4.1 日常使用"></a>2.4.1 日常使用</h3><p>开机后打开Docker Desktop，等右下角的小鲸鱼图标停止晃动（显示已启动），直接在浏览器打开 <a target="_blank" rel="noopener" href="http://localhost/">http://localhost</a> 即可。</p>
<p>如果故障无法访问，则重新部署一下ubuntu_dify的实例，操作顺序如下：</p>
<ol>
<li><p>启动 Docker Desktop：确保右下角小鲸鱼状态正常。</p>
</li>
<li><p>打开终端：进入你的 ubuntu_dify 实例：</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wsl -d ubuntu_dify</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>手动启动容器： 进入之前克隆代码的目录（这一步最重要）：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/dify/docker</span><br><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure>
<p>系统会检查各个组件状态，已经运行的会跳过，没运行的会补齐。</p>
<p>然后在浏览器打开 <a target="_blank" rel="noopener" href="http://localhost/">http://localhost</a> 即可。</p>
<h3 id="2-4-2-通过批处理脚本快速启动Dify"><a href="#2-4-2-通过批处理脚本快速启动Dify" class="headerlink" title="2.4.2 通过批处理脚本快速启动Dify"></a>2.4.2 通过批处理脚本快速启动Dify</h3><p>可以把Dify的启动命令写成一个简单的 Windows 批处理文件（.bat），放在桌面上，需要时直接运行即可：</p>
<p>在桌面新建一个记事本，粘贴以下内容：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">:: 设置编码为UTF-8，解决乱码</span><br><span class="line">chcp 65001 &gt;nul</span><br><span class="line"><span class="built_in">echo</span> 正在请求 WSL 启动 Dify 容器组...</span><br><span class="line"></span><br><span class="line">:: 使用 root 用户的绝对路径进入目录并启动</span><br><span class="line">wsl -d ubuntu_dify -u root -e sh -c <span class="string">&quot;cd /root/dify/docker &amp;&amp; docker compose up -d&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> -------------------------------------------------------</span><br><span class="line"><span class="built_in">echo</span> Dify 启动指令已发送！</span><br><span class="line"><span class="built_in">echo</span> 请稍后在浏览器访问: http://localhost</span><br><span class="line"><span class="built_in">echo</span> -------------------------------------------------------</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
<p>(注意：将 上面的用户名 换成在 Ubuntu 里的实际账户名称)</p>
<p>重命名为 启动Dify.bat。以后开机点一下它就行了。</p>
<h3 id="2-4-3-彻底关闭释放资源"><a href="#2-4-3-彻底关闭释放资源" class="headerlink" title="2.4.3 彻底关闭释放资源"></a>2.4.3 彻底关闭释放资源</h3><p>如果做完实验想把内存腾出来，彻底关闭 Dify释放资源。可以在 ubuntu_dify 终端中执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/dify/docker</span><br><span class="line">docker compose stop  <span class="comment"># 停止运行，但保留容器，下次启动快</span></span><br></pre></td></tr></table></figure>
<p>或者如果需要把环境关闭释放，然后重新拉起，可以用命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/dify/docker</span><br><span class="line">docker compose down  <span class="comment"># 彻底移除容器，下次启动会重新创建（数据不会丢，因为挂载了卷）</span></span><br></pre></td></tr></table></figure>
<p>有时候刚开机，环境重新构建时，会出现容器比Posgret数据库拉起得快，系统没有读到历史数据就会误以为是全新件的系统。这个时候就可以彻底关闭一下环境，再重新启动重建。保证能够正确读取数据库的用户数据。</p>
<hr>
<h1 id="二-环境准备-模型接入配置"><a href="#二-环境准备-模型接入配置" class="headerlink" title="二. 环境准备 - 模型接入配置"></a>二. 环境准备 - 模型接入配置</h1><h2 id="1-Dify所需要的模型说明"><a href="#1-Dify所需要的模型说明" class="headerlink" title="1. Dify所需要的模型说明"></a>1. Dify所需要的模型说明</h2><p>Dify的运行至少需要5种类型的模型：</p>
<p>1）系统推理模型（核心）</p>
<p>2）Embedding模型</p>
<p>3）ReRanking模型</p>
<p>4）ASR语音转文本模型</p>
<p>5）TTS文本转语音模型</p>
<p>此外还可能要用到Qwen VL这种视觉模型。</p>
<p>即使在本机安装模型推理，实测在同时加在了3个模型后，系统的CPU基本跑满。所以必需采用本地+云端服务商的模式。</p>
<p>考虑Embedding等模型的Token价格比实际推理要便宜且数据量小，考虑核心的系统推理模型采用本机，其他模型采用云服务商的模型。</p>
<h2 id="2-接入本机已经部署的模型"><a href="#2-接入本机已经部署的模型" class="headerlink" title="2. 接入本机已经部署的模型"></a>2. 接入本机已经部署的模型</h2><h3 id="1-1-LM-Studio"><a href="#1-1-LM-Studio" class="headerlink" title="1.1 LM Studio"></a>1.1 LM Studio</h3><ol>
<li>下载安装LM Studio及模型</li>
</ol>
<p>首先安装LM Studio并下载模型，安装很简单，后面有时间再写指导文档。</p>
<p>我本机前面已经下载了LM Studio并下了4个模型（DeepSeek Qwen3 8B蒸馏版、Qwen3 4B Thinking模型 - 具备工具调用功能、Qwen2.5 VL 7B视觉模型 和Embedding模型）。</p>
<p>在LM Studio的开发者窗口下，可以同时加在多个模型，并且同时在运行状态。而在对话窗口下，因为可以与模型直接聊天，所以每次限制智能加载1个模型。</p>
<ol start="2">
<li>把模型配置到Dify中</li>
</ol>
<p>首先在LM Studio的开发者Tab下，点Server Setting，打开“在网络中提供服务”选项，并且记下自己本机的LM Studio的端口号。</p>
<p>然后在Dify主界面中 点击右边圆的用户头像 → 设置 → 模型供应商 → 安装模型供应商 → LM Studio。</p>
<p>这里安装的都是Dify的系统插件，安装后可以让Dify可以连通本地的模型通讯端口，或者调用各种云侧的模型供应商对应的API。</p>
<p>安装完插件后刷新一下，在模型供应商中就可以看到LM Studio了。然后点添加模型，在插件中配置模型，其他都简单。在配置地址的地方，需要本机IP，可以在任意命令行窗口中 ipconfig一下。</p>
<p>地址这行填： http:&#x2F;&#x2F;本机IP地址:LM Studio端口号，如<a target="_blank" rel="noopener" href="http://172.21.160.1:1234/">http://172.21.160.1:1234</a> 即可。</p>
<h3 id="1-2-Ollama"><a href="#1-2-Ollama" class="headerlink" title="1.2 Ollama"></a>1.2 Ollama</h3><p>类似方式添加，但是既然LM Studio的开发者模式下可以双模型，就不需要两个软件同时开启两个模型了。CPU占用是一样的。</p>
<p>对比Ollama，我个人更喜欢用LM Studio，直接集成了对话窗口，并且模型可选择性更强。</p>
<h2 id="2-接入网上的Token服务"><a href="#2-接入网上的Token服务" class="headerlink" title="2. 接入网上的Token服务"></a>2. 接入网上的Token服务</h2><h3 id="2-1-安装硅基流动模型服务"><a href="#2-1-安装硅基流动模型服务" class="headerlink" title="2.1 安装硅基流动模型服务"></a>2.1 安装硅基流动模型服务</h3><p>类似上面，先安装硅基流动的模型服务插件。在插件安装好后，进行模型配置。</p>
<p>轨迹流动可以找到一些免费的模型。如多语言嵌入模型 BGE m3 和中文嵌入模型BGE-large-zh-v1.5，及英文嵌入模型等。</p>
<h1 id="三-动手实操-搭建Agent"><a href="#三-动手实操-搭建Agent" class="headerlink" title="三. 动手实操 - 搭建Agent"></a>三. 动手实操 - 搭建Agent</h1><h2 id="1-任务-1：构建RAG知识管理方案"><a href="#1-任务-1：构建RAG知识管理方案" class="headerlink" title="1. 任务 1：构建RAG知识管理方案"></a>1. 任务 1：构建RAG知识管理方案</h2><p>实验目标：解决大模型“幻觉”问题，让 AI 基于你本地的私有文档（如 PDF、Markdown）进行精准回答。</p>
<p>准备工作：准备 3-5 份关于某个特定领域（如：Dify 官方文档、某医学论文、或你的个人工作周报）的文档。</p>
<p>详细步骤：</p>
<p>创建知识库：点击顶部【知识库】-&gt;【创建知识库】-&gt;【上传文本】。</p>
<p>清洗与分段：选择**“高质量”**模式。在分段设置中，建议【最大分段长度】设为 500-800，【重叠长度】设为 50-100（防止语义断层）。</p>
<p>索引方式：选择**“混合检索”**（结合向量检索和全文检索），这是目前 RAG 最稳健的方案。</p>
<p>搭建应用：创建【聊天助手】，在右侧【上下文】中关联此知识库。</p>
<p>提示词优化：</p>
<p>“你是一个专业的知识助手。请严格根据上下文回答问题。如果文档中没有相关信息，请诚实告知用户你不知道，不要编造。”</p>
<p>实验观测点：</p>
<p>召回测试：提问文档中的冷门细节，查看【日志】里 AI 引用了哪一段文字。</p>
<p>引用功能：在发布后，测试回答界面是否会出现数字下标，点击能否跳转到原文档对应位置。</p>
<h2 id="2-任务-2：多模态视觉实验——“检验报告医疗翻译官”"><a href="#2-任务-2：多模态视觉实验——“检验报告医疗翻译官”" class="headerlink" title="2. 任务 2：多模态视觉实验——“检验报告医疗翻译官”"></a>2. 任务 2：多模态视觉实验——“检验报告医疗翻译官”</h2><p>实验目标：利用视觉模型（如 GPT-4o 或 Claude 3.5 Sonnet）识别复杂图片，并结合专业逻辑输出诊断建议。</p>
<p>准备工作：一张带有血常规或尿常规数据的化验单图片（可从网上找一张样本）。</p>
<p>详细步骤：</p>
<p>创建应用：选择【Agent】（智能体）模式。</p>
<p>开启视觉：在左侧设置栏找到【图片上传】，选择【高分辨率】模式。</p>
<p>Prompt 角色设定：</p>
<p>Markdown</p>
<p> Role: 资深医学检验科医生<br> Workflow:</p>
<ol>
<li>识别图片中的所有化验项目、测量值及单位。</li>
<li>自动筛选出超出参考范围（带有↑或↓符号）的异常指标。</li>
<li>解释这些异常指标可能代表的生理或病理意义。</li>
<li>提供针对性的生活建议或推荐挂号科室。<br> Safety: 结尾必须强调“本分析仅为 AI 模拟，不代表临床诊断”。<br>工具配置：如果有条件，可以接入一个 Google Search 工具，让 Agent 查一下最新的医学指标标准。</li>
</ol>
<p>实验观测点：</p>
<p>OCR 准确率：检查模型是否把“8.5”错认成“8.6”。</p>
<p>多模态推理：看模型能否理解“红细胞偏高”和“血红蛋白偏高”之间的关联性。</p>
<h2 id="3-任务-3：工作流（Workflow）实验——“电商智能自动客服”"><a href="#3-任务-3：工作流（Workflow）实验——“电商智能自动客服”" class="headerlink" title="3. 任务 3：工作流（Workflow）实验——“电商智能自动客服”"></a>3. 任务 3：工作流（Workflow）实验——“电商智能自动客服”</h2><p>实验目标：利用工作流逻辑（Workflow）实现意图识别、自动化分流和精准售后处理。</p>
<p>准备工作：模拟几个常见的用户问题（例如：“我的快递到哪了？”、“我要退款”、“这件衣服什么材质？”）。</p>
<p>详细步骤（节点配置）：</p>
<p>开始节点：接收用户输入的 sys.query。</p>
<p>意图分类（Question Classifier）：添加一个分类节点。</p>
<p>类别 1：物流查询 -&gt; 连接到 Google Search 工具（模拟查快递）或知识库。</p>
<p>类别 2：商品咨询 -&gt; 连接到【商品知识库】。</p>
<p>类别 3：售后&#x2F;退款 -&gt; 连接到【大语言模型】。</p>
<p>条件分支（IF&#x2F;ELSE）：</p>
<p>如果是“退款”，先用 LLM 判断其语气。如果是“非常生气”，则输出话术 A（人工优先）；如果是“正常询问”，输出话术 B（流程指引）。</p>
<p>知识库检索：如果是商品咨询，去搜你的【商品说明书知识库】。</p>
<p>回答（Answer）：整合上述信息输出。</p>
<p>实验观测点：</p>
<p>分类准确度：提问“衣服会掉色吗？”，看工作流是否准确跑到了“商品咨询”的分支。</p>
<p>变量传递：检查查询到的物流信息能否顺利传递到最终的文本回答节点中。</p>
<hr>
<p>【参考指导】</p>
<p>1.<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1qTBNBqEdn?t=191.7&p=2">在Linux中安装Docker和Dify</a></p>
<hr>
<p>（本文完）</p>

</div>

<!-- post-guide -->

    <div class="post-guide">
        <div class="item left">
            
        </div>
        <div class="item right">
            
              <a href="/2025/12/27/03%20AI%E5%AD%A6%E4%B9%A0/09%20%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D/2025-12-27-%E3%80%90%E5%8A%A8%E6%89%8B%E5%AE%9E%E6%93%8D%E3%80%91%E5%9C%A8%E6%9C%AC%E5%9C%B0%E8%AE%AD%E7%BB%83%E4%B8%AD%E5%9B%BD%E5%90%8D%E8%91%97NanoGPT/">
                动手实操 - 在本地训练中国名著NanoGPT
                <i class="fa fa-angle-right" aria-hidden="true"></i>
              </a>
            
        </div>
    </div>


<!-- comment - giscus -->


<!-- comment - valine -->


<script>
	
	
</script>

	</div>
	<div id="footer">
	<p>
	©<span id="footerYear-start"></span>-<span id="footerYear-end"></span>

	
	    <a href="/">十二亚晖</a>
	
	
	
	<br>
	Theme <a href="//github.com/wujun234/hexo-theme-tree" target="_blank">Tree</a>
	by <a href="//wujun.me" target="_blank">Wu Jun</a>
	Powered by <a href="//hexo.io" target="_blank">Hexo</a>
	</p>
</div>


<script type="text/javascript">
	document.getElementById('footerYear-start').innerHTML = new Date().getFullYear() + '';
</script>

<script type="text/javascript">
	document.getElementById('footerYear-end').innerHTML = new Date().getFullYear() + '';
</script>

	<button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button>
</body>
</html>